language: go

go:
  - "1.12"

# safelist - Build only for dev, master and tags
branches:
  only:
  - dev
  - master
  - /^v\d+\.\d+(\.\d+)?(-\S*)?$/

services:
  - docker

before_script:
  - srccheck/verify-gofmt.sh
  - srccheck/verify-govet.sh
  - srccheck/verify-golint.sh

script:
  - make build
  - make test
  - make container-image
  - make tag-image
  - make publish
